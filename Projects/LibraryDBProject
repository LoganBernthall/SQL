-- Project by Logan Bernthall, created on 10/12/2023
-- Project created to help author learn SQL - DO NOT USE THIS FOR ANY COMMERCIAL OR BUSINESS USE AS REAL-WORLD APPLICATION MAY NOT BE SUFFICIENT


ALTER DATABASE SCOPED CONFIGURATION 
  SET VERBOSE_TRUNCATION_WARNINGS = OFF;

--Create table of books, regardless of read, want to read status

IF NOT EXISTS(SELECT 1 FROM sys.tables WHERE name = 'Books')
BEGIN

CREATE TABLE Books (
    book_id INT PRIMARY KEY,
    title VARCHAR(250) NOT NULL,
    author VARCHAR(250) NOT NULL,
    genre VARCHAR (250),
    date_read DATE,
    added_date DATE,
    Want_To_Read BIT,
    Book_Read BIT 
);

END

IF NOT EXISTS(SELECT 1 FROM sys.tables WHERE name = 'Books_Read')
BEGIN

--Create a table of books to be read from the books table
CREATE TABLE Books_Read (
    book_read_id INT PRIMARY KEY,
    book_id INT,
    FOREIGN KEY (book_id) REFERENCES Books(book_id)
);

END

IF NOT EXISTS(SELECT 1 FROM sys.tables WHERE name = 'Books_Want_to_Read')
BEGIN
--Create a table of books wanted to be read from the books table
CREATE TABLE Books_Want_to_Read (
    book_want_id INT PRIMARY KEY,
    book_id INT,
    FOREIGN KEY (book_id) REFERENCES Books(book_id)
);

END

--Insert some books into Books Table

-- Game of Thrones series
INSERT INTO Books (book_id, title, author, genre, date_read, added_date, Want_To_Read, Book_Read)
VALUES (1, 'A Game of Thrones', 'George R.R. Martin', 'Fantasy', '2022-05-20', 0, 1);
INSERT INTO Books (book_id, title, author, genre, date_read, added_date, Want_To_Read, Book_Read)
VALUES (2, 'A Clash of Kings', 'George R.R. Martin', 'Fantasy', '2022-07-10', 1, 0, 1);
INSERT INTO Books (book_id, title, author, genre, date_read, added_date, Want_To_Read, Book_Read)
VALUES (3, 'A Storm of Swords', 'George R.R. Martin', 'Fantasy', '2022-09-05', 1, 0, 1);
